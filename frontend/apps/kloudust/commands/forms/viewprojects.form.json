{
"id": "viewprojects",
"command": "tablelist",
"type": "table_display",

"i18n": {
"en": {
    "Projects_name": "Name",
    "Projects_description": "Description",
    "Projects_datetime": "Created On",
    "ProjectsAddUserToProject": "Add User",
    "ProjectsRemoveUserFromProject": "Remove User",
    "ProjectsDeleteProject": "Delete Project"

},

"hi": {
    "Projects_name": "Name",
    "Projects_description": "Description",
    "Projects_datetime": "Created On",
    "ProjectsAddUserToProject": "Add User",
    "ProjectsRemoveUserFromProject": "Remove User",
    "ProjectsDeleteProject": "Delete Project"

},

"ja": {
    "Projects_name": "Name",
    "Projects_description": "Description",
    "Projects_datetime": "Created On",
    "ProjectsAddUserToProject": "Add User",
    "ProjectsRemoveUserFromProject": "Remove User",
    "ProjectsDeleteProject": "Delete Project"

},

"zh": {
    "Projects_name": "Name",
    "Projects_description": "Description",
    "Projects_datetime": "Created On",
    "ProjectsAddUserToProject": "Add User",
    "ProjectsRemoveUserFromProject": "Remove User",
    "ProjectsDeleteProject": "Delete Project"

}
},

"tabledef": {
    "popupform": {
    "rolelist": {
        "*":[
            {"id": "addusertoproject", "label": "{{{i18n.ProjectsAddUserToProject}}}", "logo": "img/adduser.png"},
            {"id": "removeuserfromproject", "label": "{{{i18n.ProjectsRemoveUserFromProject}}}", "logo": "img/removeuser.png"},
            {"id": "deleteproject", "label": "{{{i18n.ProjectsDeleteProject}}}", "logo": "img/delete.svg"}

        ]
    }
    },

    "style": "div#tablebottombar{display: none;}",

    "i18nPrefix": "Projects",

    "onclickrow_html": [
        "<style>div#onclick_html {background-color: #F8F8F8; width: auto;} div#close{display: none !important}</style>",
        "<style>div#onclickrow_html {height: fit-content;} div#body{background-color: #F8F8F8 !important}</style>",
        "<style>div#buttons {margin: 0 !important; align-items: flex-start !important; height: 100% !important;}</style>",
        "<style>div#button {height: unset !important; max-height: 100% !important; margin: 0 !important; color: #BC5205 !important;}</style>",
        "<style>div#button {width: 6em !important; font-size: 0.8em !important; box-sizing: border-box !important!;}</style>",
        "<style>div#button {border: 1px solid transparent; border-radius: 0.5em; padding: 0.5em;}</style>",
        "<style>div#button img {width: 3em !important; height: 3em !important;}</style>",
        "<style>div#button span {font-size: smaller !important; height: -webkit-fill-available;}</style>",
        "<style>div#button:hover {border: 1px dashed #BC5205 !important;}</style>"
    ],

    "clickrow_javascript": [
        "const data = arguments[0]; APP_CONSTANTS.ENV._projects_form_data = data;"
    ],

    "load_javascript": [
        "const projects = await $$.libapimanager.rest(APP_CONSTANTS.API_KLOUDUSTCMD, 'POST', {",
            "cmd: `getUserProjects`}, true);",
        "for (const project of projects.projects||[]) {project.datetime = new Date(project.timestamp).toLocaleDateString();}",
        "const modIconList = await import(`${APP_CONSTANTS.FORM_MODULES_PATH}/iconlist.mjs`), tabledef = arguments[0];",
        "const html = await modIconList.iconlist.getHTML(tabledef.popupform, monkshu_env.apps[APP_CONSTANTS.APP_NAME].cmdmanager);",
        "tabledef.onclickrow_html.push(html);",
        "return {keys: ['name','description','datetime'], table: projects.projects||[]};"
    ]
}
}
